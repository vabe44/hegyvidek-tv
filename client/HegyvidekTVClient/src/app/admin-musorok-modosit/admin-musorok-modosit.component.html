<main>
  <section class="content">
    <app-admin-menu></app-admin-menu>
    <div class="uj-hir">
      <form class="form-modositMusor" #f="ngForm" (ngSubmit)="modositMusor()">
        <h2 class="title">Műsor módosítása</h2>

        <div class="field is-grouped">
          <div class="control is-expanded">
            <label class="label">Műsor címe</label>
            <input id="cim" name="cim" [(ngModel)]="musor.cim" (keyup)="toUrlFormat(musor.cim)" (change)="toUrlFormat(musor.cim)" class="input" type="text" placeholder="Műsor címe">
          </div>
          <div class="control is-expanded">
            <label class="label">Beszédes URL</label>
            <input type="text" id="url" name="url" [(ngModel)]="musor.url" class="input" [class.is-success]="urlUnique" [class.is-danger]="!urlUnique" placeholder="Beszédes URL" required>
            <p *ngIf="!urlUnique" class="help is-danger">Ez az URL már létezik</p>
          </div>
          <div class="control">
            <label class="label">Státusz</label>
            <div class="select">
              <select id="statusz" [(ngModel)]="musor.statusz" name="statusz">
                <option value="aktív" [attr.selected]="musor.statusz === 'aktív' ? true : false">Aktív</option>
                <option value="inaktív" [attr.selected]="musor.statusz === 'inaktív' ? true : false">Inaktív</option>
              </select>
            </div>
          </div>
          <div class="control">
            <label class="label">Műsor képe</label>
            <div class="field">
              <div class="file is-primary">
                <label class="file-label">
                  <input class="file-input" type="file" name="photo" ng2FileSelect [uploader]="uploader">
                  <span class="file-cta">
                    <span class="file-icon">
                      <img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDU0OC4xNzYgNTQ4LjE3NiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTQ4LjE3NiA1NDguMTc2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggZD0iTTUyNC4zMjYsMjk3LjM1MmMtMTUuODk2LTE5Ljg5LTM2LjIxLTMyLjc4Mi02MC45NTktMzguNjg0YzcuODEtMTEuOCwxMS43MDQtMjQuOTM0LDExLjcwNC0zOS4zOTkgICBjMC0yMC4xNzctNy4xMzktMzcuNDAxLTIxLjQwOS01MS42NzhjLTE0LjI3My0xNC4yNzItMzEuNDk4LTIxLjQxMS01MS42NzUtMjEuNDExYy0xOC4wODMsMC0zMy44NzksNS45MDEtNDcuMzksMTcuNzAzICAgYy0xMS4yMjUtMjcuNDEtMjkuMTcxLTQ5LjM5My01My44MTctNjUuOTVjLTI0LjY0Ni0xNi41NjItNTEuODE4LTI0Ljg0Mi04MS41MTQtMjQuODQyYy00MC4zNDksMC03NC44MDIsMTQuMjc5LTEwMy4zNTMsNDIuODMgICBjLTI4LjU1MywyOC41NDQtNDIuODI1LDYyLjk5OS00Mi44MjUsMTAzLjM1MWMwLDIuNDc0LDAuMTkxLDYuNTY3LDAuNTcxLDEyLjI3NWMtMjIuNDU5LDEwLjQ2OS00MC4zNDksMjYuMTcxLTUzLjY3Niw0Ny4xMDYgICBDNi42NjEsMjk5LjU5NCwwLDMyMi40MywwLDM0Ny4xNzljMCwzNS4yMTQsMTIuNTE3LDY1LjMyOSwzNy41NDQsOTAuMzU4YzI1LjAyOCwyNS4wMzcsNTUuMTUsMzcuNTQ4LDkwLjM2MiwzNy41NDhoMzEwLjYzNiAgIGMzMC4yNTksMCw1Ni4wOTYtMTAuNzExLDc3LjUxMi0zMi4xMmMyMS40MTMtMjEuNDA5LDMyLjEyMS00Ny4yNDYsMzIuMTIxLTc3LjUxNkM1NDguMTcyLDMzOS45NDQsNTQwLjIyMywzMTcuMjQ4LDUyNC4zMjYsMjk3LjM1MiAgIHogTTM2Mi43MjksMjg5LjY0OGMtMS44MTMsMS44MDQtMy45NDksMi43MDctNi40MiwyLjcwN2gtNjMuOTUzdjEwMC41MDJjMCwyLjQ3MS0wLjkwMyw0LjYxMy0yLjcxMSw2LjQyICAgYy0xLjgxMywxLjgxMy0zLjk0OSwyLjcxMS02LjQyLDIuNzExaC01NC44MjZjLTIuNDc0LDAtNC42MTUtMC44OTctNi40MjMtMi43MTFjLTEuODA0LTEuODA3LTIuNzEyLTMuOTQ5LTIuNzEyLTYuNDJWMjkyLjM1NSAgIEgxNTUuMzFjLTIuNjYyLDAtNC44NTMtMC44NTUtNi41NjMtMi41NjNjLTEuNzEzLTEuNzE0LTIuNTY4LTMuOTA0LTIuNTY4LTYuNTY2YzAtMi4yODYsMC45NS00LjU3MiwyLjg1Mi02Ljg1NWwxMDAuMjEzLTEwMC4yMSAgIGMxLjcxMy0xLjcxNCwzLjkwMy0yLjU3LDYuNTY3LTIuNTdjMi42NjYsMCw0Ljg1NiwwLjg1Niw2LjU2NywyLjU3bDEwMC40OTksMTAwLjQ5NWMxLjcxNCwxLjcxMiwyLjU2MiwzLjkwMSwyLjU2Miw2LjU3MSAgIEMzNjUuNDM4LDI4NS42OTYsMzY0LjUzNSwyODcuODQ1LDM2Mi43MjksMjg5LjY0OHoiIGZpbGw9IiNGRkZGRkYiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K"
                      />
                    </span>
                    <span class="file-label">
                      Kép feltöltése
                    </span>
                  </span>
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="field is-grouped">
          <div *ngIf="musor.kep" class="control is-expanded">
            <label class="label">Kép</label>
            <figure class="image is-16by9">
              <img [attr.src]="musor?.kep">
            </figure>
          </div>
          <div class="control is-expanded">
            <label class="label">Műsor leírása</label>
            <textarea class="textarea" [(ngModel)]="musor.leiras" id="leiras" name="leiras" placeholder="e.g. Hello world"></textarea>
          </div>
        </div>
        <div class="field is-grouped">
          <p class="control">
            <button class="button is-danger" (click)="torlesMusor()">Törlés</button>
          </p>
          <p class="control is-expanded">
            <button class="button is-success" type="submit" [disabled]="!urlUnique">Mentés</button>
          </p>
        </div>
      </form>
    </div>

    <div *ngIf="adas" class="uj-adas">
      <form class="form-banner" (ngSubmit)="letrehozAdas()">
        <h2 class="title">Új adás létrehozása műsorújsághoz</h2>

        <div class="field is-grouped">
          <div class="field is-fullwidth">
            <label class="label">Adás napja</label>
            <div class="control is-expanded">
              <p class="select is-fullwidth">
                <select id="nap" [(ngModel)]="adas.nap" name="nap">
                  <option value="1">Hétfő</option>
                  <option value="2">Kedd</option>
                  <option value="3">Szerda</option>
                  <option value="4">Csütörtök</option>
                  <option value="5">Péntek</option>
                  <option value="6">Szombat</option>
                  <option value="7">Vasárnap</option>
                </select>
              </p>
            </div>
          </div>
          <p class="control">
            <label class="label">Adás kezdete</label>
            <input id="aktivEttol" [(ngModel)]="adas.aktivEttol" class="input" type="time" name="aktivEttol">
          </p>
          <p class="control">
            <label class="label">Adás vége</label>
            <input id="aktivEddig" [(ngModel)]="adas.aktivEddig" class="input" type="time" name="aktivEddig">
          </p>
        </div>

        <div class="field">
          <p class="control is-expanded">
            <button class="mentes button is-success is-medium is-fullwidth" type="submit">Mentés</button>
          </p>
        </div>
      </form>
    </div>

    <div class="adasok">
      <h2 class="title">Adasok</h2>
      <form *ngFor="let adas of adasok; let index = index;trackBy:trackByIndex;" class="form-modositAdas">
        <div class="field is-grouped">
          <div class="control">
            <div class="select">
              <select id="nap" [(ngModel)]="adas.nap" name="nap">
                  <option value="1" [attr.selected]="adas.nap === 1 ? true : false">Hétfő</option>
                  <option value="2" [attr.selected]="adas.nap === 2 ? true : false">Kedd</option>
                  <option value="3" [attr.selected]="adas.nap === 3 ? true : false">Szerda</option>
                  <option value="4" [attr.selected]="adas.nap === 4 ? true : false">Csütörtök</option>
                  <option value="5" [attr.selected]="adas.nap === 5 ? true : false">Péntek</option>
                  <option value="6" [attr.selected]="adas.nap === 6 ? true : false">Szombat</option>
                  <option value="7" [attr.selected]="adas.nap === 7 ? true : false">Vasárnap</option>
              </select>
            </div>
          </div>
          <p class="control">
            <!-- <label class="label">Adás kezdete</label> -->
            <input id="aktivEttol" [(ngModel)]="adas.aktivEttol" class="input" type="time" name="aktivEttol">
          </p>
          <p class="control">
            <!-- <label class="label">Adás vége</label> -->
            <input id="aktivEddig" [(ngModel)]="adas.aktivEddig" class="input" type="time" name="aktivEddig">
          </p>
          <p class="control">
            <button class="button is-primary" (click)="modositAdas(adas)">Frissítés</button>
          </p>
          <p class="control">
            <button class="button is-danger" (click)="torlesAdas(adas)">Törlés</button>
          </p>
        </div>
      </form>
    </div>
  </section>
</main>